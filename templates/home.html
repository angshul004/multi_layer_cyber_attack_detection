<!DOCTYPE html>
<html>
<head>
    <title>Create Account | SentinelX</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@500;600;700&family=Space+Grotesk:wght@400;500;600&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/theme.css') }}" rel="stylesheet">
</head>
<body>

{% include "navbar.html" %}

<main class="hero-shell">
    <section class="hero-left">
        <img class="hero-placeholder" src="static/images/homepage.png" alt="SentinelX platform visual placeholder">
        <p class="hero-tagline">
            SentinelX helps teams detect suspicious behavior, correlate attack signals, and respond before incidents escalate.
        </p>
    </section>
    <section class="hero-right">
        <div class="panel auth-box">
            <h1 class="section-title mb-2">Create an account</h1>
            <p class="text-white fs-5 mb-4">Already have an account? <a href="/login">Log in</a></p>

            <input id="username" class="form-control input-dark mt-2" placeholder="Username">
            <input id="email" class="form-control input-dark mt-3" placeholder="Email">
            <input id="password" type="password" class="form-control input-dark mt-3" placeholder="Enter your password">

            <button onclick="register()" class="btn btn-primary-custom w-100 mt-4 py-2">Create account</button>
            <p id="msg" class="mt-3 muted"></p>
        </div>
    </section>
</main>

<script>
function register() {
  fetch("/api/register", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({
      username: username.value,
      email: email.value,
      password: password.value
    })
  }).then(r => r.json()).then(d => {
    const m = document.getElementById("msg");
    if (d.message) {
      m.style.color = "#2ed3a5";
      m.innerText = d.message + " Please log in.";
    } else {
      m.style.color = "#ff8a9c";
      m.innerText = d.error || "Registration failed";
    }
  });
}
</script>

</body>
</html>
