<!DOCTYPE html>
<html>
<head>
    <title>Login | SentinelX</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@500;600;700&family=Space+Grotesk:wght@400;500;600&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/theme.css') }}" rel="stylesheet">
</head>
<body>

{% include "navbar.html" %}

<main class="container py-5">
    <div class="row justify-content-center">
        <div class="col-12 col-md-7 col-lg-5">
            <div class="panel p-4">
                <h1 class="section-title mb-2">Log in</h1>
                <p class="text-white fs-5 mb-4">Access your SentinelX dashboard and security tools.</p>

                <input id="username" class="form-control input-dark mt-2" placeholder="Username">
                <input id="password" type="password" class="form-control input-dark mt-3" placeholder="Enter your password">

                <button onclick="login()" class="btn btn-primary-custom w-100 mt-4 py-2">Log in</button>
                <p id="message" class="mt-3 muted"></p>
            </div>
        </div>
    </div>
</main>

<script>
function login() {
    fetch("/api/login", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({
            username: username.value,
            password: password.value
        })
    }).then(r => r.json()).then(d => {
        const msg = document.getElementById("message");
        if (d.redirect) {
            window.location.href = d.redirect;
            return;
        }
        msg.style.color = "#ff8a9c";
        msg.innerText = d.error || "Login failed";
    });
}
</script>

</body>
</html>
